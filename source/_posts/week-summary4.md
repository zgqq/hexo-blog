---
title: week-summary4
date: 2017-04-01 21:30:48
tags:
---

# 任务
这周有3个任务，准确的说是2个，另外1个是历史遗留的
## 才艺分类
这个跟业务密切相关，现在业务都不熟，什么东西都得问
## 日志
那个日志分析，确实有点蛋疼，数据量还是相当大的，每秒就有3000多条日志，之前有说过那个统计后插入数据库是无顺序的，其实是不存在的，从一开始我就理解错了jstorm，以为jstorm要开多task才能发挥威力，如果开多个task，意味着多线程，有可能21:00:01的日志比21:00:00还先到，这种情况是相当难处理的，没有很好的办法处理这个问题，这个问题困扰了我相当久，但是如果不开多个task呢，一切都变得简单了，日志都是有顺序的，只要21:00:01来后，把21:00:00的统计提交上去就行了，全部的bolt只有一个task会不会出现扩展问题呢，最开始我就是担心这个问题，一直考虑多个task，可惜我脱离了实际谈需求，解析日志的bolt作为上游，之前在这个bolt开了多个task，根据我的测试解析10000条的log大概是100毫秒，现在的数据量撑死1000条/秒，根本不用开多个task
## 转发聊天
先过滤敏感词，再通过http请求，转发给云信，这个相对好做的一点
# 总结
似乎任务越来越难的样子，日志处理那个是技术上难，其他是业务上难，什么文档，代码都没给我，就叫我去写，我特么也是醉了
